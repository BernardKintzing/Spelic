<html>

<head>
    <title>Spelic | Log In</title>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <!--[if lte IE 8]><script src="assets/js/ie/html5shiv.js"></script><![endif]-->
    <link rel="stylesheet" href="assets/css/main.css" />
    <!--[if lte IE 9]><link rel="stylesheet" href="assets/css/ie9.css" /><![endif]-->
    <!--[if lte IE 8]><link rel="stylesheet" href="assets/css/ie8.css" /><![endif]-->
</head>

<body>
    <h1>Log In</h1>
    <form>
        <div>
            <input id="email" type="text" placeholder="Email...">
        </div>
        <div>
            <input id="password" type="password" placeholder="Password...">
        </div>
        <div>
            <button id="sign-in">Sign In</button>
        </div>
    </form>
    <h1>Sign Up</h1>
    <form>
        <div>
            <input id="email-signup" type="text" placeholder="Email...">
        </div>
        <div>
            <input id="name-signup" type="text" placeholder="Name...">
        </div>
        <div>
            <input id="password-signup" type="password" placeholder="Password...">
        </div>
        <div>
            <button id="sign-up">Sign Up</button>
        </div>
    </form>


    <!-- The core Firebase JS SDK is always required and must be listed first -->
    <script src="/__/firebase/7.8.0/firebase-app.js"></script>

    <!-- TODO: Add SDKs for Firebase products that you want to use -->
    <script src="/__/firebase/7.8.0/firebase-auth.js"></script>

    <!-- Initialize Firebase -->
    <script src="/__/firebase/init.js"></script>

    <script>
        document.querySelector('#sign-in').addEventListener('click', function (e) {
            e.preventDefault();
            e.stopPropagation();
            var email = document.querySelector('#email').value;
            var password = document.querySelector('#password').value
            firebase.auth().signInWithEmailAndPassword(email, password).catch(function (error) {
                // Handle Errors here.
                var errorCode = error.code;
                var errorMessage = error.message;
                console.log(errorMessage)
                // ...
            });


            firebase.auth().onAuthStateChanged(function (user) {
                if (user) {
                    window.location.replace("/home.html");
                } else {
                    window.location.replace("/login.html");
                }
            });
            // var credential = firebase.auth.EmailAuthProvider.credential(email, password);
            // var auth = firebase.auth();
            // var currentUser = auth.currentUser;

            console.log(currentUser)

            //TODO redirect to home
        });

        document.querySelector('#sign-up').addEventListener('click', function (e) {
            e.preventDefault();
            e.stopPropagation();
            var email = document.querySelector('#email-signup').value;
            var password = document.querySelector('#password-signup').value
            firebase.auth().createUserWithEmailAndPassword(email, password).catch(function (error) {
                // Handle Errors here.
                var errorCode = error.code;
                var errorMessage = error.message;
                console.log(errorMessage)
                // ...
            });
        });
    </script>
</body>

</html>